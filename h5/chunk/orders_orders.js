(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"10":function(e,t,a){e.exports=a(0)(18)},"11":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});t.default={"url":"http://www.sieia.org/index/","isLogin":!1,"imgUrl":"http://www.sieia.org/static/"}},"13":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var n=_interopRequireDefault(a(1)),s=(_interopRequireDefault(a(2)),_interopRequireDefault(a(11)));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}t.default=function requestHttps(e,t,a,l,i){var r=this;n.default.showLoading({"title":"请稍后..."}),n.default.request({"url":s.default.url+e,"data":a,"method":t,"complete":function complete(){n.default.hideLoading()},"success":function success(e){n.default.hideLoading(),l.call(r,e.data)},"fail":function fail(){i.call(r,"请求失败!")}})}},"14":function(e,t,a){e.exports=a(0)(19)},"30":function(e,t,a){},"9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var n=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),s=a(1),l=_interopRequireDefault(s),i=_interopRequireDefault(a(2)),r=a(10),o=a(12);a(30);var u=_interopRequireDefault(a(13)),c=_interopRequireDefault(a(11));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var d=function(e){function Orders(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Orders);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Orders.__proto__||Object.getPrototypeOf(Orders)).apply(this,arguments));return e.onSelectChange=function(t){e.setState({"selectorChecked":e.state.selector[t.detail.value],"checkCosts":e.state.deliveryCosts[t.detail.value]})},e.addAdderss=function(t){e.setState({"isOpened":!0})},e.closeAdd=function(t){e.setState({"isOpened":!1})},e.goHome=function(e){l.default.navigateTo({"url":"../../pages/index/index"})},e.handleChange=function(t){e.setState({"message":t})},e.handleNameChange=function(t){e.setState({"user":t})},e.handleTelChange=function(t){e.setState({"phone":t})},e.handleCityChange=function(t){e.setState({"city":t})},e.handleEmsChange=function(t){e.setState({"ems":t})},e.submitAddChange=function(t){var a=!0;if(e.isPoneAvailable(e.state.phone)||(a=!1,l.default.atMessage({"message":"手机号码输入不正确!","type":"error"})),""==e.state.user&&(a=!1,l.default.atMessage({"message":"收件人必填!","type":"error"})),""==e.state.city&&(a=!1,l.default.atMessage({"message":"收件人地址必填!","type":"error"})),a){var n="地址:"+e.state.city+";收件人:"+e.state.user+";联系方式:"+e.state.phone+";邮政编码:"+e.state.ems+";",s=[{"label":n,"value":n}].concat(function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(e.state.adderssLists));e.setState({"user":"","city":"","phone":"","ems":"","isOpened":!1,"adderssLists":s})}},e.isPoneAvailable=function(e){return!!/^[1][2,,3,4,5,6,7,8,9][0-9]{9}$/.test(e)},e.submitForm=function(t){var a={},n=!0;""==e.state.adderss&&(n=!1,l.default.atMessage({"message":"收件人地址必填!","type":"error"})),n&&(a.price=e.state.shopInfo.price,a.shop_name=e.state.shopInfo.shop_name,a.buy_num=e.state.buyNum,a.adderss=e.state.adderss,a.message=e.state.message,a.k_name=e.state.selectorChecked,a.costs=e.state.checkCosts,a.allmoney=e.state.allMoney)},e.config={"navigationBarTitleText":"确定订单"},e.state={"user":"","city":"","phone":"","ems":"","shopInfo":{"id":"","shop_name":"","price":0,"stores":0,"img":"","sales":0},"selector":["普通快递","顺丰快递","申通快递","EMS快递","中通快递","圆通快递"],"deliveryCosts":[10,20,10,15,10,10],"selectorChecked":"普通快递","checkCosts":10,"message":"","adderss":"","adderssLists":[],"allMoney":0,"isOpened":!1,"buyNum":0},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Orders,s.Component),n(Orders,[{"key":"handleRadioChange","value":function handleRadioChange(e){this.setState({"adderss":e,"isOpened":!1})}},{"key":"componentWillMount","value":function componentWillMount(){var e=this;(0,u.default)("shops/detail?id="+this.$router.params.id,"GET","",function(t){e.setState({"shopInfo":t,"buyNum":e.$router.params.num})},function(e){console.log(e)})}},{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"componentDidShow","value":function componentDidShow(){}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"render","value":function render(){var e=this.state,t=e.shopInfo,a=e.buyNum,n=a*t.price;return this.state.allMoney=n+this.state.checkCosts,i.default.createElement(r.View,{"className":"order-mode"},i.default.createElement(o.AtMessage,null),i.default.createElement(r.View,{"className":"adderss"},i.default.createElement(o.AtList,null,i.default.createElement(o.AtListItem,{"onClick":this.addAdderss.bind(this),"title":"添加地址","arrow":"right"})),i.default.createElement(r.View,{"className":"check-info"},i.default.createElement(o.AtRadio,{"options":this.state.adderssLists,"value":this.state.adderss,"onClick":this.handleRadioChange.bind(this)}))),i.default.createElement(r.View,{"className":"order-info"},i.default.createElement(r.View,{"className":"shop-name"},i.default.createElement(o.AtIcon,{"value":"menu","size":"20"}),i.default.createElement(r.Text,{"className":"name"},"深圳双创小店")),i.default.createElement(r.View,{"className":"shop-info"},i.default.createElement(r.Image,{"src":c.default.imgUrl+t.img,"className":"img"}),i.default.createElement(r.View,{"className":"shop-title"},t.shop_name),i.default.createElement(r.View,{"className":"price-num"},i.default.createElement(r.Text,{"className":"price"},"￥",t.price),i.default.createElement(r.Text,{"className":"num"},"X ",a))),i.default.createElement(r.View,{"className":"count"},i.default.createElement(r.Text,null,"共",a,"件商品"),i.default.createElement(r.Text,{"className":"x-count"},"小计:"),i.default.createElement(r.Text,{"className":"m-count"},"￥",n))),i.default.createElement(r.View,{"className":"magges"},i.default.createElement(r.View,null,i.default.createElement(r.Picker,{"mode":"selector","range":this.state.selector,"onChange":this.onSelectChange.bind(this)},i.default.createElement(r.View,{"className":"picker"},i.default.createElement(r.Text,null,"配送方式："),i.default.createElement(r.Text,null,this.state.selectorChecked)))),i.default.createElement(o.AtInput,{"name":"message","title":"买家留言","type":"text","placeholder":"给商家留言","value":this.state.message,"onChange":this.handleChange.bind(this)})),i.default.createElement(r.View,{"className":"menoy"},i.default.createElement(r.View,{"className":"menoy-title"},i.default.createElement(r.Text,null,"商品金额"),i.default.createElement(r.Text,null,"￥",n)),i.default.createElement(r.View,{"className":"menoy-count"},i.default.createElement(r.Text,null,"快递运费:"),i.default.createElement(r.Text,{"className":"money-text"},"￥",this.state.checkCosts)),i.default.createElement(r.View,{"className":"menoy-all"},i.default.createElement(r.Text,null,"合计:"),i.default.createElement(r.Text,{"className":"money-text"},"￥",this.state.allMoney),i.default.createElement(r.Text,{"className":"submit","onClick":this.submitForm.bind(this)},"提交订单"))),i.default.createElement(o.AtModal,{"isOpened":this.state.isOpened},i.default.createElement(o.AtModalHeader,null,"添加收件地址"),i.default.createElement(o.AtModalContent,null,i.default.createElement(o.AtForm,null,i.default.createElement(o.AtInput,{"name":"user","title":"收件人","type":"text","placeholder":"收件人名称","value":this.state.user,"onChange":this.handleNameChange.bind(this)}),i.default.createElement(o.AtInput,{"name":"city","title":"收件人地址","type":"text","placeholder":"收件人地址","value":this.state.city,"onChange":this.handleCityChange.bind(this)}),i.default.createElement(o.AtInput,{"name":"phone","title":"联系电话","type":"phone","placeholder":"手机号码","value":this.state.phone,"onChange":this.handleTelChange.bind(this)}),i.default.createElement(o.AtInput,{"name":"ems","title":"邮政编码","type":"number","placeholder":"请输入邮政编码","value":this.state.ems,"onChange":this.handleEmsChange.bind(this)}))),i.default.createElement(o.AtModalAction,null," ",i.default.createElement(r.Button,{"onClick":this.closeAdd.bind(this)},"取消")," ",i.default.createElement(r.Button,{"onClick":this.submitAddChange},"添加")," ")))}}]),Orders}();t.default=d}}]);